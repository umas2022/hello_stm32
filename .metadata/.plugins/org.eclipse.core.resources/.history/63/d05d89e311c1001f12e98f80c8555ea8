#ifndef TMC2209_H
#define TMC2209_H

#include <stdint.h>

// Datagrams
const static uint8_t WRITE_READ_REPLY_DATAGRAM_SIZE = 8;
const static uint8_t DATA_SIZE = 4;
const static uint8_t SYNC = 0b101;
const static uint8_t RW_READ = 0;
const static uint8_t RW_WRITE = 1;
union WriteReadReplyDatagram {
	struct {
		uint64_t sync :4;
		uint64_t reserved :4;
		uint64_t serial_address :8;
		uint64_t register_address :7;
		uint64_t rw :1;
		uint64_t data :32;
		uint64_t crc :8;
	};
	uint64_t bytes;
};

uint32_t reverseData(uint32_t data);
void write(uint8_t register_address, uint32_t data);

#endif
